app:
  project_id: example
  env: test
  debug: false
  max_response_time: 5
  max_produce_retry_times: 3

zookeeper:
  hosts: localhost:12181
  timeout: 10.0
  topic_mapping_path: /event-bus/happ/dev/topics
  stories_path: /event-bus/happ/dev/stories

kafka:
  # https://docs.microsoft.com/en-us/azure/event-hubs/apache-kafka-configurations
  # https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION.md
  producer:
    "bootstrap.servers": "maggie-kafka-1:9094,maggie-kafka-2:9094,maggie-kafka-3:9094"
    "enable.idempotence": "true"
    "delivery.timeout.ms": "1500" # Set according to the formula (request.timeout.ms + linger.ms) * retries.
    "acks": "all"
    "socket.keepalive.enable": "true"
    "metadata.max.age.ms": "180000"
    "partitioner": "consistent_random"
    "compression.codec": "none"

  consumer:
    "bootstrap.servers": "maggie-kafka-1:9094,maggie-kafka-2:9094,maggie-kafka-3:9094"
    "enable.auto.commit": "true"
    "auto.commit.interval.ms": "2000"
    "enable.auto.offset.store": "false"
    "auto.offset.reset": "latest"
    "max.poll.interval.ms": "600000" # offset commit failures because of rebalance
    "socket.keepalive.enable": "true"
    "topic.metadata.refresh.interval.ms": "180000"
    "metadata.max.age.ms": "180000"
    "heartbeat.interval.ms": "3000"
    "session.timeout.ms": "60000" # If no hearts are received by the broker for a group member within the session timeout, the broker will remove the consumer from the group and trigger a rebalance.
    "allow.auto.create.topics": "true" # doesn't work
    "partition.assignment.strategy": "cooperative-sticky"

sentry:
  dsn: https://6fa26904f71d476ba73c9bfe1b54fe6e@sentry2.ideawisegroup.com/24

statsd:
  host: 10.20.2.118
  port: 8125
  prefix: eventbus3

#sinks:
#  test_sink:
#    url: http://localhost:8081/receive_events
#    timeout: 5
#
#stories:
#  - kafka_topic: "event-v2-test-topic1"
#    include_events: [ "test.event1", "test.event2" ]
#    exclude_events: [ "test.event3" ]
#    concurrent_per_partition: 1
#    dead_letter_topic: "event-v2-test-topic1-dl"
#    sink: test_sink
#
#topic_mapping:
#  - topic: event-v3-stress-test-4
#    patterns:
#      - stress_test\..*
#  - topic: event-v3-test-topic5
#    patterns:
#      - test\.event1
#  - topic: event-v3-test-default5
#    patterns:
#      - .*
